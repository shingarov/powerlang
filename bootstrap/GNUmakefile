
all: pharo-ui bootstrap.image

pharo pharo-ui:
	curl https://get.pharo.org/64/vm80 | bash

Pharo.image:
	curl https://get.pharo.org/64/80 | bash

bootstrap.image: pharo Pharo.image src scripts/bootstrap-setup.st
	./pharo Pharo.image scripts/bootstrap-setup.st
	@echo ""
	@echo "To open Pharo bootstrap image run:"
	@echo ""
	@echo "    ./pharo-ui bootstrap.image"
	@echo ""

test: bootstrap.image pharo
	./pharo $< test --junit-xml-output Powerlang-Tests
	mkdir -p test-reports
	mv Powerlang-Tests-Test.xml test-reports

bee-dmr: specs/bee-dmr
	echo "bee-dmr" >specs/current	

specs/bee-dmr:
	git clone git@github.com:powerlang/bee-dmr.git specs/bee-dmr || git clone https://github.com/powerlang/bee-dmr.git specs/bee-dmr

clean:
	rm -rf Pharo* pharo* bootstrap.image icon-packs
